# Converting mctv matlab files to csv

Note, this should only be needed by users of the mctv software from Jan Hemmi at the University of
Western Australia.
The output file generated here will be modified to add the required input arguments for the data generation process

1. Add the files you want to use for images and labels to a data source specifier csv file with 3 columns: 
- `image_file_path` (path to the dicom or nifti file used to annotate with mctv). You can use the original nifti file size. The data will be downsized by the program. 
- `split` (containing 'train' or 'test' to say how the data should be split)
		This should be generated randomly. If you are using k-fold cross validation,
        generate a number of these data source specifier files with the correct `split` value
        for each fold.
- `mctv_label_file_path` (matlab files with corneas and rhabdoms generated by mctv)

Your csv file should look like the following: (order unimportant)

| image_file_path | split | mctv_label_file_path | 
|-----------------|-------|----------------------|
| /path/to/image1 | train | /path/to/label1.mat  |
| /path/to/image2 | test  | /path/to/label2.mat  |
| /path/to/image3 | train | /path/to/label3.mat  |

2. Run the `mctv_to_csv.py` script
```python
python mctv_to_csv.py <PATH_TO_YOUR_DATA_SOURCE_SPECIFIER>
```
replacing `<PATH_TO_YOUR_DATA_SOURCE_SPECIFIER>` with the path to your data source specifier csv

3. Inspect the newly updated data source specifier csv file.

It should look like the following:

| image_file_path | split | mctv_label_file_path | labels_corneas | labels_rhabdoms |
|-----------------|-------|----------------------|----------------|-----------------|
| /path/to/image1 | train | /path/to/label1.mat  | /path/to/cornea_labels1.csv | /path/to/rhabdom_labels1.csv |
| /path/to/image2 | test  | /path/to/label2.mat  | /path/to/cornea_labels1.csv | /path/to/rhabdom_labels1.csv |
| /path/to/image3 | train | /path/to/label3.mat  | /path/to/cornea_labels1.csv | /path/to/rhabdom_labels1.csv |

4. Continue with steps in the main [readme](../README.md)
